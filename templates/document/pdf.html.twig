<style>
    * {
        font-size: 8px;
    }

    td {
        font-size: 8px;
    }

    .final-price {
        font-size: 10px;
        font-weight: bold;
        padding-top: 10px;
    }

    h1 {
        font-size: large;
    }

    .pb-3 {
        padding-bottom: 30px;
    }

    .pb-2 {
        padding-bottom: 20px;
    }

    .fw-bold {
        font-weight: bold;
    }

    .text-end {
        text-align: right;
    }

    table {
        width: 100%
    }

    th {
        background-color: rgb(220, 220, 220);
    }

    p {
        margin: 0;
        padding: 0;
    }

    .block {
        background-color: rgb(220, 220, 220);
        padding: 20px 20px 20px 20px;
    }

</style>


<table class="pb-2">
    <tr>
        <td></td>
        <td>
            <p>
                <strong>{{ document.company.name }}</strong>
                <br>{{ document.company.street }}
                {{ document.company.buildingNumber }}
                ,
                {{ document.company.zipcode }}
                {{ document.company.city }}
                <br>IC:
                {{ document.company.businessId }}
                <br>DIC:
                {{ document.company.vatNumber }}</p>
        </td>
        <td>
            <p>&nbsp;
                <br>Telefon:
                {{ document.company.phone }}
                <br>E-mail:
                {{ document.company.email }}
                <br>www:
                {{ document.company.website }}</p>
        </td>
    </tr>
</table>
<table class="pb-2">
    <tr>
        <td width="60%">
            <h1>Faktura - daňový doklad<br>číslo :
                {{ document.documentNumber }}</h1>
        </td>
        <td width="40%">
            <p>Odběratel:<br>{{ document.customer.name }}<br>{{ document.customer.street }}
                <br>{{ document.customer.zipcode }}{{ document.customer.town }}<br>{{ document.customer.country.name }}
                <br>IČ: 08220387 DIČ: CZ699002719</p>
        </td>
    </tr>
</table>
<table class="pb-2">
    <tr>
        <td>
            <table>
                <tr>
                    <td>Číslo účtu:</td>
                    <td class="fw-bold">{{ document.bankAccount.accountNumber }}
                        /{{ document.bankAccount.bankCode }}</td>
                </tr>
                <tr>
                    <td>IBAN:</td>
                    <td class="fw-bold">{{ document.bankAccount.iban }}</td>
                </tr>
                <tr>
                    <td>SWIFT:</td>
                    <td class="fw-bold">{{ document.bankAccount.bic }}</td>
                </tr>
                <tr>
                    <td>Variabilní symbol:</td>
                    <td class="fw-bold">{{ document.variableSymbol }}</td>
                </tr>
                <tr>
                    <td>Forma úhrady:</td>
                    <td class="fw-bold">{{ document.paymentType.name }}</td>
                </tr>
            </table>
        </td>
        <td><img src="{{ qrCodeBase64 }}" width="60" height="60" alt="{{ 'invoice.pdf.qr_payment'|trans }}"></td>
        {% set countryCode = 'cs_CZ' %}
        {# FIXME::document.customer.country.sname?document.company.country.sname #}
        {#        {{ dump( document.dateIssue) }} #}

        <td><p>
                Datum vystavení:
                {{ document.dateIssue|format_datetime('short', 'none', locale=countryCode) }}<br>
                Datum
                splatnosti:
                {{ document.dateTaxable|format_datetime('short', 'none', locale=countryCode) }}<br>
                Datum zdanitelného
                plnění:
                {{ document.dateDue|format_datetime('short', 'none', locale=countryCode) }}
            </p>
        </td>
    </tr>
</table><p class="pb-2"> {{ document.description }}</p>
<div class=" pb-3">
    <table class="table" cellpadding="3">
        <thead class="table-secondary">
        <tr>
            <th class="">Položka</th>
            <th class="text-end">Množství</th>
            <th class="text-end">Jed. cena</th>
            {% if document.vatMode.name in ['DOMESTIC','DOMESTIC_REVERSE_CHARGE','OSS'] %}
                <th class="text-end">DPH</th>
                <th class="text-end">Celkem bez DPH</th>
                <th class="text-end">Celkem s DPH</th>
            {% else %}
                <th class="text-end">Celkem</th>
            {% endif %}
        </tr>
        </thead>
        <tbody>
        {% for item in document.documentItems %}
            {% if document.vatMode.name in ['DOMESTIC','DOMESTIC_REVERSE_CHARGE','OSS'] %}
                {% set vat = item.vat?item.vat.vatAmount /100 + 1:null %}
            {% endif %}
            <tr>
                <td>{{ item.name }}</td>
                <td class="text-end">{{ item.quantity }} {{ item.unit }}</td>
                <td class="text-end">{{ item.price }}</td>
                {% if document.vatMode.name in ['DOMESTIC','DOMESTIC_REVERSE_CHARGE','OSS'] %}
                    <td class="text-end">{{ item.vat.vatAmount }}</td>
                    <td class="text-end">{{ (item.price * item.quantity)|number_format }}</td>
                    <td class="text-end">{{ (item.price * item.quantity * vat)|number_format }}</td>
                {% else %}
                    <td class="text-end">{{ (item.price * item.quantity)|number_format }}</td>
                {% endif %}
            </tr>
        {% endfor %}
        </tbody>
    </table>
</div>
<div style="padding:0 0 0 100px;">
    <table>
        {% if document.vatMode.name in ['DOMESTIC','DOMESTIC_REVERSE_CHARGE','OSS'] %}
            <tr>
                <td>&nbsp;</td>
                <td class="text-end">Základ</td>
                <td class="text-end">DPH</td>
                <td class="text-end">Celkem</td>
            </tr>
        {% endif %}
        {% for documentPrice in document.documentPrices %}
            {% if documentPrice.priceType.id == 2 %}
                <tr>
                    <td>{{ documentPrice.vatLevel ? documentPrice.vatLevel.name }}</td>
                    <td class="text-end">{{ documentPrice.amount|default(0)|number_format(2,',',' ') }}</td>
                    <td class="text-end">{{ documentPrice.vatAmount|default(0)|number_format(2,',',' ') }}</td>
                    <td class="text-end">{{ (documentPrice.amount+documentPrice.vatAmount)|default(0)|number_format(2,',',' ') }}</td>
                </tr>
            {% endif %}
        {% endfor %}
        {% for documentPrice in document.documentPrices %}
            {% if documentPrice.priceType.id == 1 %}
                <tr>
                    <td colspan="3" class="final-price">CELKEM K ÚHRADĚ</td>
                    <td class="text-end final-price">
                        {{ documentPrice.amount|default(0)|number_format(2,',',' ') }}  {{ document.currency.code }}
                    </td>
                </tr>
            {% endif %}
        {% endfor %}
        <tr>
            <td colspan="4" class="text-end">Konečná částka je včetně zaokrouhlení.</td>
        </tr>
    </table>

</div>
{% if document.vatMode.name == 'DOMESTIC_REVERSE_CHARGE' %}
    <div class="block">
        <table>
            <tr>
                <td>
                    <strong>Dan odvede zakazník</strong><br>
                    V režimu přenesené danové povinnosti
                </td>
                <td>
                    <table>
                        {% for documentPrice in document.documentPrices %}
                            {% if documentPrice.priceType.id == 2 %}
                                <tr>
                                    <td>{{ documentPrice.vatLevel ? documentPrice.vatLevel.name }}</td>
                                    <td class="text-end">{{ documentPrice.amount|default(0)|number_format(2,',',' ') }} {{ document.currency.code }}</td>
                                </tr>
                            {% endif %}
                        {% endfor %}
                    </table>
                </td>
            </tr>
        </table>
    </div>
{% endif %}
