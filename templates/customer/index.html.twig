{% extends 'base.html.twig' %}

{% block title %}Adresář{% endblock %}

{% block body %}
    <h1 class="mb-5 flex justify-start items-center text-xl space-x-3 px-2 md:px-0">
        <a href="{{ path('app_dash_board', {'company': company.publicId}) }}">
            <svg class="size-8">
                <use href="#arrow-left-circle"/>
            </svg>
        </a>
        <span>Adresář</span>
    </h1>

    <div class="mt-8 md:mb-8 gap-4 flex fixed bottom-0 left-0 justify-center w-full md:relative md:justify-start bg-gray-900 md:bg-transparent py-2">
        {% if is_granted('CREATE') %}
        <a href="{{ path('app_customer_new', {'company': company.publicId}) }}"
           class="px-4 py-2 order-2 md:order-1 rounded-sm  bg-gray-700 hover:bg-table-header hover:text-white/80 flex items-center">
                <svg class="size-5 sm:mr-2">
                    <use href="#plus-circle-fill"/>
                </svg>
                <span class="hidden sm:block">NOVÝ</span>
            </a>{% endif %}
    </div>

    <div class="bg-card-bg p-0 md:p-4">
        <div class="bg-table-header text-text-primary/80 grid grid-cols-[1fr_1fr_50px] md:grid-cols-[2fr_1fr_1fr_1fr_50px]">
            <div class="order-1 md:order-1 p-2 pb-1 md:p-2 sm:col-span-1">Name</div>
            <div class="md:order-3 p-2 hidden">BankAccount</div>
            <div class="order-2 md:order-4 p-2 pb-1 md:p-2 text-right">Ic</div>
            <div class="order-4 md:order-2 px-2 pb-2 pt-0 md:p-2 text-xs font-light md:text-base md:font-normal">Town
            </div>
            <div class="order-5 md:order-5 px-2 pb-2 pt-0 md:p-2 text-right text-xs font-light md:text-base md:font-normal">
                Dic
            </div>
            <div class="order-3 md:order-6 row-span-2 md:row-span-1 p-2"></div>
        </div>
        {% for customer in customers %}
            <div class="grid grid-cols-[1fr_1fr_50px] md:grid-cols-[2fr_1fr_1fr_1fr_50px] border-b border-b-border">
                <div class="order-1 md:order-1 p-2 pb-1 md:p-2">
                    {% if is_granted('EDIT', customer) %}
                        <a href="{{ path('app_customer_edit', {'customer': customer.id, 'company':company.publicId}) }}"
                           class="text-decoration-none">{{ customer.name }}</a>{% else %}{{ customer.name }}{% endif %}
                </div>
                <div class="md:order-3 p-2 hidden">{{ customer.bankAccount }}</div>

                <div class="order-2 md:order-4 p-2 pb-1 md:p-2 text-right">{{ customer.companyNumber }}</div>

                <div class="order-4 md:order-2 px-2 pb-2 pt-0 md:p-2 text-xs font-light md:text-base md:font-normal">{{ customer.town }}</div>
                <div class="order-5 md:order-5 px-2 pb-2 pt-0 md:p-2 text-right text-xs font-light md:text-base md:font-normal">{{ customer.vatNumber }}</div>
                <div class="order-3 row-span-2 md:row-span-1 md:order-6 p-2 flex justify-end items-center space-x-2">{% if is_granted('EDIT', customer) %}
                    <a href="{{ path('app_customer_delete', {'company':company.publicId, 'customer': customer.id}) }}"
                       class="text-secondary icon-link-hover">
                            <svg class="size-5">
                                <use href="#dash-circle-fill"/>
                            </svg>
                        </a>{% endif %}
                </div>
            </div>
        {% else %}
            <p class="p-2">{{ 'customer.no_record_found'|trans }}</p>
        {% endfor %}
    </div>
{% endblock %}
